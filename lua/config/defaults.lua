local copilot = " "

local M = {
    code_actions = {
        "",
        "quickfix",
        -- "refactor",
        -- "refactor.extract",
        -- "refactor.inline",
        "refactor.rewrite",
        "source",
        "source.fixAll",
        "source.organizeImports",
    },

    files = {
        ignored_patterns = {
            "%.DS_Store",
            "%.gz",
            "%.jpeg",
            "%.jpg",
            "%.lock",
            "%.png",
            "%.yarn/.*",
            "^.direnv/.*",
            "^.git/",
            "^.venv/.*",
            "^__pypackages__/.*",
            "^lazy-lock.json",
            "^site-packages/",
            "^target/",
            "^venv/.*",
            "node%_modules/.*",
        },
    },

    -- Filetypes that should be formatted on save.
    formatting = {
        file_types = {
            bash = { "shellharden", "shfmt" },
            bzl = { "buildifier" },
            caddy = { "caddy" },
            css = { "biome" },
            direnv = { "shellharden", "shfmt" },
            fish = { "fish_indent" },
            go = { "goimports", "gofumpt" },
            graphql = { "biome" },
            javascript = { "biome" },
            json = { "biome" },
            jsonc = { "biome" },
            jsx = { "biome" },
            just = { "just" },
            lua = { "stylua" },
            markdown = { "markdownlint-cli2", "markdown-toc" },
            python = { "ruff_organize_imports", "ruff_format", "ruff_fix" },
            rust = {},
            sh = { "shellharden", "shfmt" },
            toml = { "taplo" },
            tsx = { "biome" },
            typescript = { "biome" },
            xml = { "xmlformat" },
        },
        on_save = {
            "bash",
            "caddy",
            "direnv",
            "fish",
            "go",
            "just",
            "lua",
            "rust",
            "toml",
        },
    },

    linters = {
        fish = { "fish" },
        ghaction = { "actionlint" },
        gitcommit = { "write_good" },
        go = { "revive" },
        htmldjango = { "curlylint" },
        jinja = { "curlylint" },
        markdown = { "markdownlint-cli2", "write_good" },
        protobuf = { "protolint" },
        rst = { "rstcheck", "write_good" },
        text = { "write_good" },
        yaml = { "yamllint" },
    },

    tools = {
        "ast-grep",
        "gitui",
    },

    icons = {
        actions = {
            close = "󰅖 ",
            close_box = "󰅗 ",
            close_hexagon = "󰅜 ",
            close_outline = "󰅚 ",
            close_round = "󰅙 ",
        },
        diagnostics = {
            error = "󰅚 ",
            warn = "󰀪 ",
            info = " ",
            hint = "󰌶 ",
        },
        fold = {
            open = " ",
            closed = "",
        },
        git = {
            add = " ", -- '',
            mod = " ",
            remove = " ", -- '',
            ignore = " ",
            rename = " ",
            untracked = " ",
            ignored = " ",
            unstaged = "󰄱 ",
            staged = " ",
            conflict = " ",
            diff = " ",
            repo = " ",
            logo = "󰊢 ",
            branch = " ",
        },
        menu = {
            actions = {
                outline = {
                    left = "󰨂",
                    right = "󰨃",
                    up = "󰚷",
                    down = "󰚶",
                    swap = "󰩥",
                    filter = "󱃦",
                },
                filled = {
                    up = "󰍠",
                    down = "󰍝",
                    left = "󰍞",
                    right = "󰍟",
                    swap = "󰩤",
                    filter = "󱃥 ",
                },
            },
            hamburger = "󰍜 ",
            hamburger_open = "󰮫 ",
        },
        misc = {
            arrow_right = "",
            block = "▌",
            bookmark = " ",
            bug = " ", --  '󰠭'
            calendar = " ",
            caret_right = "",
            check = "󰄬 ",
            chevron_right = " ",
            circle = " ",
            circle_filled = " ",
            circle_filled_large = "⬤",
            circle_slash = " ",
            clock = " ",
            code = " ",
            comment = "󰅺 ",
            copilot = copilot,
            dashboard = " ",
            datetime = "󱛡 ",
            double_chevron_right = "»",
            down = "⇣",
            ellipse_dbl = "",
            ellipsis = "…",
            exit = "󰗼 ",
            fire = " ",
            gear = " ",
            git = " ",
            github = "󰊤 ",
            history = "󰄉 ",
            hook = "󰛢",
            hook_disabled = "󰛣 ",
            indent = "Ξ",
            kebab = "",
            lightbulb = "󰌶 ",
            line = "", -- 'ℓ'
            list = " ",
            lock = "",
            modified = "●",
            newline = "",
            note = "󰎞 ",
            package = " ",
            pencil = " ", -- '󰏫',
            plus = " ",
            project = " ",
            question = " ",
            robot = "󰚩 ",
            search = "󰍉 ",
            shaded_lock = " ",
            sign_in = " ",
            tab = "⇥",
            table = " ",
            telescope = " ",
            tools = " ",
            up = "⇡",
        },
        separators = {
            angle_quote = {
                left = "«",
                right = "»",
            },
            chevron = {
                left = "",
                right = "",
                down = "",
            },
            circle = {
                left = "",
                right = "",
            },
            arrow = {
                left = "",
                right = "",
            },
            slant = {
                left = "",
                right = "",
            },
            bar = {
                left = "⎸",
                right = "⎹",
            },
        },
        lsp = {
            Class = "",
            Color = "",
            Constant = "󰏿",
            Constructor = "",
            Enum = "",
            EnumMember = "",
            Event = "",
            Field = "󰇽",
            File = "󰉋",
            Folder = "󰉋",
            Function = "󰊕",
            Interface = "",
            Keyword = "󰌋",
            Method = "",
            Module = "",
            Namespace = "󰦮",
            Null = "",
            Number = "󰎠",
            Object = "",
            Operator = "󰆕",
            Package = "",
            Property = "󰜢",
            Reference = "",
            Snippet = "",
            String = "",
            Struct = "󰆼",
            Text = "",
            TypeParameter = "󰅲",
            Unit = "",
            Value = "",
            Variable = "󰀫",
            Version = "󱘗", -- crates.nvim lsp completion type.
        },
    },

    -- Various buffer and file types that should be ignored.
    ignored = {
        buffer_types = {
            "gitcommit",
            "help",
            "nofile",
            "quickfix",
            "terminal",
            "trouble",
        },
        file_types = {
            "",
            "Codewindow",
            "DressingInput",
            "DressingSelect",
            "TelescopePrompt",
            "TelescopeResults",
            "alpha",
            "chatgpt",
            "chatgpt-input",
            "checkhealth",
            "crates.nvim",
            "git",
            "gitrebase",
            "glowpreview",
            "large_file",
            "keymenu",
            "lazy",
            "log",
            "lspinfo",
            "mason",
            "noice",
            "notify",
            "qf",
            "trouble",
            "tsplayground",
            "vim",
        },
        lsp = {
            "copilot",
            "llm-ls",
            "sonarlint.nvim",
            "typos_lsp",
        },
        paths = {
            "~/.cache",
            "~/.cargo",
            "~/.local/state",
            "~/.rustup",
            tostring(vim.fn.stdpath("data")),
            tostring(vim.fn.stdpath("state")),
        },
        progress = {
            "basedpyright",
            "copilot",
            "ltex",
            "pylance",
            "pyright",
            "sonarlint.nvim",
        },
    },

    root_patterns = {
        ".chezmoiroot",
        ".luacheckrc",
        ".luarc.json",
        ".luarc.jsonc",
        ".stylua.toml",
        "Cargo.toml",
        "configure",
        "fish_variables",
        "go.mod",
        "package.json",
        "pyproject.toml",
        "requirements.txt",
        "ruff.toml",
        "selene.toml",
        "selene.yml",
        "setup.cfg",
        "setup.py",
        "stylua.toml",
    },

    statusline = {
        modes = {
            ["n"] = "N",
            ["no"] = "N",
            ["nov"] = "N",
            ["noV"] = "N",
            ["no"] = "N",
            ["niI"] = "N",
            ["niR"] = "N",
            ["niV"] = "N",
            ["v"] = "V",
            ["V"] = "V",
            [""] = "V",
            ["s"] = "S",
            ["S"] = "S",
            [""] = "S",
            ["i"] = "I",
            ["ic"] = "I",
            ["ix"] = "I",
            ["R"] = "R",
            ["Rc"] = "R",
            ["Rv"] = "R",
            ["Rx"] = "R",
            ["r"] = "R",
            ["rm"] = "R",
            ["r?"] = "R",
            ["c"] = "C",
            ["cv"] = "C",
            ["ce"] = "C",
            ["!"] = "T",
            ["t"] = "T",
            ["nt"] = "T",
        },

        wordcount = {
            markdown = true,
            text = true,
            vimwiki = true,
        },
    },

    ui = {
        border = {
            name = "single",
            chars = { "─", "│", "─", "│", "┌", "┐", "┘", "└" },
        },

        lsp = {
            -- colors = {
            --     error = M.colors.red.dim,
            --     warn = M.colors.orange,
            --     hint = M.colors.blue.bright,
            --     info = M.colors.cyan,
            -- },
            --- This is a mapping of LSP Kinds to highlight groups. LSP Kinds come via the LSP spec
            --- see: https://microsoft.github.io/language-server-protocol/specifications/lsp/3.17/specification/#symbolKind
            highlights = {
                File = "Directory",
                Snippet = "Label",
                Text = "@string",
                Method = "@method",
                Function = "@function",
                Constructor = "@constructor",
                Field = "@field",
                Variable = "@variable",
                Module = "@namespace",
                Property = "@property",
                Unit = "@constant",
                Value = "@variable",
                Enum = "@type",
                Keyword = "@keyword",
                Reference = "@parameter.reference",
                Constant = "@constant",
                Struct = "@structure",
                Event = "@variable",
                Operator = "@operator",
                Namespace = "@namespace",
                Package = "@include",
                String = "@string",
                Number = "@number",
                Boolean = "@boolean",
                Array = "@repeat",
                Object = "@type",
                Key = "@field",
                Null = "@symbol",
                EnumMember = "@field",
                Class = "@lsp.type.class",
                Interface = "@lsp.type.interface",
                TypeParameter = "@lsp.type.parameter",
            },
        },
    },
}

M.colors = {
    -- Slightly tweaked to be more like nordic.nvim.
    red = { base = "#bf616a", bright = "#d06f79", dim = "#a54e56" },
    orange = { base = "#d08770", bright = "#d89079", dim = "#b46950" },
    green = { base = "#a3be8c", bright = "#b1d196", dim = "#8aa872" },
    yellow = { base = "#ebcb8b", bright = "#f0d399", dim = "#d9b263" },
    magenta = { base = "#b48ead", bright = "#c895bf", dim = "#9d7495" },

    -- Nordic: blue, intense_blue, none
    blue = { base = "#81a1c1", bright = "#5e81ac", dim = "#668aab" },

    -- Nordic: black, bright_black, dark_black
    black = { base = "#3b4252", bright = "#434c5e", dim = "#2e3440", dark = "#222730" },

    -- Nordic: cyan, bright_cyan, none
    cyan = { base = "#8fbcbb", bright = "#88c0d0", dim = "#69a7ba" },

    -- Nordic: white, bright_white, dark_white
    white = { base = "#e5e9f0", bright = "#eceff4", dim = "#d8dee9" },

    -- Nordic: gray, grayish, dark_black_alt
    gray = { base = "#4c566a", bright = "#667084", dim = "#2b303b" },
}

-- local C = {
--     none = "NONE",
--     bg = "#2e3440",
--     fg = "#eceff4",
--     night = {
--         c0 = "#2e3440",
--         c1 = "#3b4252",
--         c2 = "#434c5e",
--         c3 = "#4c566a",
--     },
--     snow = {
--         c0 = "#d8dee9",
--         c1 = "#e5e9f0",
--         c2 = "#eceff4",
--     },
--     frost = {
--         blue = "#5e81ac",
--         light_blue = "#81a1c1",
--         sea = "#8fbcbb",
--         turquoise = "#88c0d0",
--     },
--     aurora = {
--         green = "#a3be8c",
--         orange = "#d08770",
--         purple = "#B48EAD",
--         red = "#bf616a",
--         yellow = "#ebcb8b",
--     },
--     -- blend = {
--     --     red = U.blend("#bf616a", "#2E3440", 0.1),
--     --     yellow = U.blend("#ebcb8b", "#2E3440", 0.1),
--     --     green = U.blend("#a3be8c", "#2E3440", 0.1),
--     --     turquoise = U.blend("#88c0d0", "#2E3440", 0.1),
--     --     blue = U.blend("#5e81ac", "#2E3440", 0.2),
--     --     bluec1 = U.blend("#5e81ac", "#2E3440", 0.3),
--     -- },
--     special = {
--         sea = "#8EBDBC",
--         light_blue = "#7AA1BE",
--     },
-- }

vim.g.terminal_color_0 = M.colors.blue.base

M.highlights = {
    Added = { link = "DiffAdd" },
    Bold = { bold = true },
    Boolean = { link = "Number" },
    Changed = { link = "DiffChange" },
    Character = { link = "String" },
    ColorColumn = { bg = M.colors.black.dim },
    Comment = { fg = M.colors.gray.bright },
    Conceal = { fg = M.colors.black.bright },
    Conditional = { fg = M.colors.blue.bright, italic = true },
    Constant = { fg = M.colors.white.dim },
    CurSearch = { link = "IncSearch" },
    Cursor = { bg = M.colors.white.dim, fg = M.colors.black.dim },
    CursorColumn = { bg = M.colors.gray.base },
    CursorIM = { link = "Cursor" },
    CursorLine = { bg = "None" },
    CursorLineFold = { link = "FoldColumn" },
    CursorLineNr = { bold = true, fg = M.colors.yellow.base },
    CursorLineSign = { link = "SignColumn" },
    Debug = { link = "Special" },
    Define = { link = "PreProc" },
    Delimiter = { link = "Special" },
    DiagnosticDeprecated = { sp = M.colors.black.dim6, strikethrough = true },
    DiagnosticError = { fg = M.colors.red.base },
    DiagnosticHint = { fg = M.colors.blue.bright },
    DiagnosticInfo = { fg = M.colors.blue.base },
    DiagnosticOk = { fg = M.colors.green.base },
    DiagnosticUnderlineError = { fg = M.colors.red.base, sp = M.colors.gray.base, underline = true },
    DiagnosticUnderlineHint = { fg = M.colors.blue.base, sp = M.colors.blue.bright, underline = true },
    DiagnosticUnderlineInfo = { fg = M.colors.green.base, sp = M.colors.blue.base, underline = true },
    DiagnosticUnderlineOk = { sp = M.colors.green.base, undercurl = true },
    DiagnosticUnderlineWarn = { fg = M.colors.yellow.base, sp = M.colors.yellow.base, underline = true },
    DiagnosticUnnecessary = { link = "Comment" },
    DiagnosticWarn = { fg = M.colors.yellow.base },
    DiffAdd = { fg = M.colors.green.base },
    DiffChange = { fg = M.colors.yellow.base },
    DiffDelete = { fg = M.colors.red.base },
    DiffText = { fg = M.colors.red.base },
    Directory = { fg = M.colors.white.bright },
    EndOfBuffer = { fg = M.colors.black.dim },
    Error = { fg = M.colors.red.base },
    ErrorMsg = { fg = M.colors.red.base },
    Exception = { link = "Keyword" },
    Float = { link = "Number" },
    FloatBorder = { fg = M.colors.gray.base },
    FloatFooter = { link = "FloatTitle" },
    FloatShadow = { bg = M.colors.gray.base, blend = 80 },
    FloatShadowThrough = { bg = M.colors.gray.base, blend = 100 },
    FloatTitle = { fg = M.colors.white.bright },
    FocusedSymbol = { link = "Search" },
    FoldColumn = { fg = M.colors.gray.base },
    Folded = { bg = M.colors.black.dim, fg = M.colors.gray.base },
    Function = { fg = M.colors.white.bright, italic = true },
    Identifier = { fg = M.colors.white.base },
    Ignore = { link = "Normal" },
    IncSearch = { bg = M.colors.blue.bright, fg = M.colors.black.dim },
    Include = { link = "PreProc" },
    Italic = { italic = true },
    Keyword = { fg = M.colors.blue.base, italic = true },
    Label = { link = "Conditional" },
    LineNr = { fg = M.colors.gray.base },
    LineNrAbove = { link = "LineNr" },
    LineNrBelow = { link = "LineNr" },
    LspCodeLens = { fg = M.colors.gray.bright },
    LspCodeLensSeparator = { fg = M.colors.gray.base },
    LspInlayHint = { fg = M.colors.gray.bright },
    LspReferenceRead = { bg = M.colors.gray.base },
    LspReferenceText = { bg = M.colors.gray.base },
    LspReferenceWrite = { bg = M.colors.gray.base },
    LspSignatureActiveParameter = { fg = M.colors.gray.base },
    Macro = { link = "PreProc" },
    MatchBackground = { link = "ColorColumn" },
    MatchParen = { bg = M.colors.gray.base, fg = M.colors.cyan.bright },
    MatchParenCur = { link = "MatchParen" },
    MatchWord = { link = "MatchParen" },
    ModeMsg = { bold = true, fg = M.colors.white.dim },
    ModesCopy = { bg = M.colors.yellow.base },
    ModesDelete = { bg = M.colors.red.base },
    ModesInsert = { bg = M.colors.cyan.base },
    ModesVisual = { bg = M.colors.magenta.base },
    MoreMsg = { bold = true, fg = M.colors.cyan.bright },
    MsgArea = {},
    MsgSeparator = { link = "StatusLine" },
    NonText = { fg = M.colors.white.base },
    Normal = { bg = M.colors.black.dim, fg = M.colors.white.dim },
    NormalFloat = { bg = M.colors.black.dim, fg = M.colors.white.dim },
    NormalNC = { bg = M.colors.black.dim, fg = M.colors.white.dim },
    Number = { fg = M.colors.magenta.base },
    Operator = { fg = M.colors.blue.base },
    Pmenu = { bg = M.colors.gray.base, fg = M.colors.white.dim },
    PmenuExtra = { link = "Pmenu" },
    PmenuExtraSel = { link = "PmenuSel" },
    PmenuKind = { link = "Pmenu" },
    PmenuKindSel = { link = "PmenuSel" },
    PmenuSbar = { link = "PmenuSel" },
    -- https://www.reddit.com/r/neovim/comments/1f439w8/psa_for_color_scheme_authors_you_might_want_to/
    -- Matched text in normal item
    PmenuSel = { fg = M.colors.blue.base, bg = M.colors.black.base, blend = 0, bold = true, reverse = true, cterm = { reverse = true } },
    -- Matched text in selected item
    PmenuMatchSel = { fg = M.colors.blue.base, bg = M.colors.gray.base, bold = true, reverse = true, cterm = { reverse = true } },
    PmenuThumb = { bg = M.colors.gray.base },
    PreCondit = { link = "PreProc" },
    PreProc = { fg = M.colors.blue.bright },
    Question = { link = "MoreMsg" },
    QuickFixLine = { link = "CursorLine" },
    Removed = { link = "DiffDelete" },
    Repeat = { link = "Conditional" },
    Search = { bg = M.colors.gray.base, fg = M.colors.white.dim },
    SignColumn = { fg = M.colors.gray.base },
    SignColumnSB = { link = "SignColumn" },
    SnippetTabstop = { link = "Visual" },
    Special = { fg = M.colors.white.bright },
    SpecialChar = { link = "Special" },
    SpecialComment = { link = "Special" },
    SpecialKey = { link = "NonText" },
    SpellBad = { sp = M.colors.red.base, undercurl = true },
    SpellCap = { sp = M.colors.yellow.base, undercurl = true },
    SpellLocal = { sp = M.colors.blue.base, undercurl = true },
    SpellRare = { sp = M.colors.blue.base, undercurl = true },
    Statement = { fg = M.colors.blue.base, italic = true },
    StatusLine = { bg = M.colors.gray.base, fg = M.colors.cyan.bright },
    StatusLineNC = { bg = M.colors.black.base, fg = M.colors.gray.base },
    StorageClass = { link = "Type" },
    String = { fg = M.colors.green.base },
    Structure = { link = "Type" },
    Substitute = { bg = M.colors.red.base, fg = M.colors.black.dim },
    TabLine = { bg = M.colors.black.dark, fg = M.colors.white.base },
    TabLineFill = { bg = M.colors.black.dark },
    TabLineSel = { bg = M.colors.gray.base, fg = M.colors.white.base },
    Tag = { link = "Special" },
    TermCursor = { reverse = true },
    TermCursorNC = {},
    Terminal = { bg = M.colors.black.dim, fg = M.colors.white.dim },
    Title = { bold = true, fg = M.colors.white.bright },
    Todo = { bg = M.colors.blue.base, fg = M.colors.black.dim },
    Type = { fg = M.colors.cyan.base, italic = true },
    Typedef = { link = "Type" },
    Underlined = { underline = true },
    UnderlinedTitle = { bold = true, underline = true },
    VertSplit = { link = "WinSeparator" },
    Visual = { bg = M.colors.gray.base },
    VisualNOS = { link = "Visual" },
    WarningMsg = { fg = M.colors.yellow.base },
    Whitespace = { fg = M.colors.gray.base },
    WildMenu = { link = "Pmenu" },
    WinBar = { link = "StatusLine" },
    WinBarNC = { link = "StatusLineNC" },
    WinSeparator = { fg = M.colors.black.base },
    ["@attribute"] = { fg = M.colors.blue.base },
    ["@attribute.builtin"] = { link = "Special" },
    ["@boolean"] = { link = "Boolean" },
    ["@character"] = { link = "Character" },
    ["@character.special"] = { link = "SpecialChar" },
    ["@comment"] = { link = "Comment" },
    ["@comment.error"] = { fg = M.colors.red.base },
    ["@comment.note"] = { fg = M.colors.blue.base },
    ["@comment.todo"] = { fg = M.colors.orange.base },
    ["@comment.warning"] = { fg = M.colors.yellow.base },
    ["@conditional"] = { link = "Conditional" },
    ["@constant"] = { link = "Constant" },
    ["@constant.builtin"] = { fg = M.colors.blue.base, italic = true },
    ["@constant.git_rebase"] = { fg = M.colors.cyan.base },
    ["@constant.macro"] = { link = "Macro" },
    ["@constructor"] = { fg = M.colors.white.base, italic = true },
    ["@constructor.lua"] = { fg = M.colors.white.base },
    ["@diff.delta"] = { link = "DiffChange" },
    ["@diff.minus"] = { link = "DiffDelete" },
    ["@diff.plus"] = { link = "DiffAdd" },
    ["@exception"] = { link = "Exception" },
    ["@float"] = { link = "Float" },
    ["@function"] = { link = "Function" },
    ["@function.builtin"] = { fg = M.colors.blue.base, italic = true },
    ["@function.call"] = { fg = M.colors.blue.base, italic = true },
    ["@function.macro"] = { fg = M.colors.blue.base, italic = true },
    ["@function.method"] = { fg = M.colors.white.base }, --  method definitions
    ["@function.method.call"] = { fg = M.colors.white.bright }, --  method calls
    ["@include"] = { link = "Include" },
    ["@keyword"] = { link = "Keyword" },
    ["@keyword.conditional"] = { link = "Conditional" },
    ["@keyword.conditional.ternary"] = { link = "Conditional" },
    ["@keyword.exception"] = { fg = M.colors.blue.base },
    ["@keyword.function"] = { fg = M.colors.blue.base, italic = true },
    ["@keyword.import"] = { link = "Include" },
    ["@keyword.operator"] = { fg = M.colors.blue.base },
    ["@keyword.repeat"] = { fg = M.colors.blue.base, italic = true },
    ["@keyword.return"] = { fg = M.colors.blue.base, italic = true },
    ["@keyword.storage"] = { link = "StorageClass" },
    ["@label"] = { link = "Label" },
    ["@label.json"] = { fg = M.colors.white.bright },
    ["@lsp.mod.deprecated"] = { link = "DiagnosticDeprecated" },
    ["@lsp.type.boolean"] = { link = "@boolean" },
    ["@lsp.type.builtinType"] = { link = "@type.builtin" },
    ["@lsp.type.class"] = { link = "@type" },
    ["@lsp.type.comment"] = { link = "@comment" },
    ["@lsp.type.comment.lua"] = {},
    ["@lsp.type.decorator"] = { link = "@attribute" },
    ["@lsp.type.enum"] = { link = "@type" },
    ["@lsp.type.enumMember"] = { link = "@constant" },
    ["@lsp.type.escapeSequence"] = { link = "@string.escape" },
    ["@lsp.type.event"] = { link = "@type" },
    ["@lsp.type.formatSpecifier"] = { link = "@punctuation.special" },
    ["@lsp.type.function"] = { link = "@function" },
    ["@lsp.type.interface"] = { fg = M.colors.red.base },
    ["@lsp.type.interface.rust"] = {},
    ["@lsp.type.keyword"] = { link = "@keyword" },
    ["@lsp.type.macro"] = { link = "@constant.macro" },
    ["@lsp.type.method"] = {},
    ["@lsp.type.modifier"] = {},
    ["@lsp.type.namespace"] = { link = "@module" },
    ["@lsp.type.number"] = { link = "@number" },
    ["@lsp.type.operator"] = { link = "@operator" },
    ["@lsp.type.parameter"] = { link = "@parameter" },
    ["@lsp.type.property"] = { link = "@property" },
    ["@lsp.type.regexp"] = { link = "@string.regexp" },
    ["@lsp.type.selfKeyword"] = { link = "@variable.builtin" },
    ["@lsp.type.string"] = { link = "@string" },
    ["@lsp.type.struct"] = { link = "@type" },
    ["@lsp.type.type"] = { link = "@type" },
    ["@lsp.type.typeAlias"] = {},
    ["@lsp.type.typeParameter"] = { link = "@parameter" },
    ["@lsp.type.unresolvedReference"] = {},
    ["@lsp.type.variable"] = {},
    ["@lsp.typemod.class.defaultLibrary"] = { link = "@type.builtin" },
    ["@lsp.typemod.enum.defaultLibrary"] = { link = "@type.builtin" },
    ["@lsp.typemod.enumMember.defaultLibrary"] = { link = "@constant.builtin" },
    ["@lsp.typemod.function.defaultLibrary"] = { link = "@function.builtin" },
    ["@lsp.typemod.keyword.async"] = {},
    ["@lsp.typemod.macro.defaultLibrary"] = { link = "@function.builtin" },
    ["@lsp.typemod.method.defaultLibrary"] = { link = "@function.builtin" },
    ["@lsp.typemod.operator.injected"] = { link = "@operator" },
    ["@lsp.typemod.string.injected"] = { link = "@string" },
    ["@lsp.typemod.type.defaultLibrary"] = { link = "@type.builtin" },
    ["@lsp.typemod.variable.defaultLibrary"] = { link = "@variable.builtin" },
    ["@lsp.typemod.variable.injected"] = { link = "@variable" },
    ["@markup"] = { fg = M.colors.white.dim },
    ["@markup.emphasis"] = { fg = M.colors.white.dim, italic = true },
    ["@markup.heading"] = { link = "Title", bold = true },
    ["@markup.italic"] = {},
    ["@markup.link"] = { bold = true, fg = M.colors.blue.base },
    ["@markup.link.label"] = { link = "Special" },
    ["@markup.link.url"] = { link = "@string.special.url" },
    ["@markup.list"] = { fg = M.colors.blue.base },
    ["@markup.list.checked"] = { fg = M.colors.green.base },
    ["@markup.list.unchecked"] = { fg = M.colors.yellow.base },
    ["@markup.math"] = { fg = M.colors.white.bright },
    ["@markup.note"] = { fg = M.colors.orange.base },
    ["@markup.quote"] = { fg = M.colors.white.base },
    ["@markup.raw"] = { fg = M.colors.white.base, italic = true },
    ["@markup.raw.block"] = { fg = M.colors.magenta.base },
    ["@markup.strikethrough"] = { fg = M.colors.white.dim, strikethrough = true },
    ["@markup.strong"] = { bold = true, fg = M.colors.white.dim },
    ["@markup.underline"] = {},
    ["@module"] = { fg = M.colors.cyan.base, italic = true },
    ["@module.builtin"] = { link = "Special" },
    ["@namespace"] = { fg = M.colors.cyan.base },
    ["@number"] = { link = "Number" },
    ["@number.float"] = { link = "Float" },
    ["@operator"] = { link = "Operator" },
    ["@property"] = { fg = M.colors.blue.base },
    ["@property.yaml"] = { fg = M.colors.cyan.base },
    ["@punctuation"] = { link = "Delimiter" },
    ["@punctuation.bracket"] = { fg = M.colors.blue.base },
    ["@punctuation.delimiter"] = { fg = M.colors.blue.base },
    ["@punctuation.special"] = { fg = M.colors.cyan.base },
    ["@repeat"] = { link = "Repeat" },
    ["@storageclass"] = { link = "StorageClass" },
    ["@string"] = { link = "String" },
    ["@string.escape"] = { bold = true, fg = M.colors.gray.bright },
    ["@string.regex"] = { fg = M.colors.gray.bright },
    ["@string.regexp"] = { fg = M.colors.gray.bright },
    ["@string.special"] = { link = "Special" },
    ["@string.special.url"] = { fg = M.colors.white.dim },
    ["@tag"] = { fg = M.colors.blue.base },
    ["@tag.attribute"] = { fg = M.colors.white.bright, italic = true },
    ["@tag.builtin"] = { link = "Special" },
    ["@tag.delimiter"] = { fg = M.colors.cyan.base },
    ["@text"] = { fg = M.colors.white.dim },
    ["@text.danger"] = { bg = M.colors.red.base, fg = M.colors.black.dim },
    ["@text.diff.add"] = { fg = M.colors.green.base },
    ["@text.diff.delete"] = { fg = M.colors.red.base },
    ["@text.emphasis"] = {},
    ["@text.literal"] = { fg = M.colors.white.base, italic = true },
    ["@text.math"] = { fg = M.colors.white.bright },
    ["@text.note"] = { bg = M.colors.blue.base, fg = M.colors.black.dim },
    ["@text.reference"] = { bold = true, fg = M.colors.blue.base },
    ["@text.strike"] = { fg = M.colors.white.dim, strikethrough = true },
    ["@text.strong"] = { bold = true, fg = M.colors.red.base },
    ["@text.title"] = { link = "Title" },
    ["@text.todo"] = { bg = M.colors.blue.bright, fg = M.colors.black.dim },
    ["@text.todo.checked"] = { fg = M.colors.green.base },
    ["@text.todo.unchecked"] = { fg = M.colors.yellow.base },
    ["@text.underline"] = {},
    ["@text.warning"] = { bg = M.colors.yellow.base, fg = M.colors.black.dim },
    ["@type"] = { link = "Type" },
    ["@type.builtin"] = { fg = M.colors.cyan.base, italic = true },
    ["@type.qualifier"] = { fg = M.colors.cyan.base }, --  type qualifiers (e.g. `const`)
    ["@variable"] = { fg = M.colors.white.dim },
    ["@variable.builtin"] = { fg = M.colors.blue.base },
    ["@variable.member"] = { fg = M.colors.blue.base },
    ["@variable.parameter"] = { fg = M.colors.yellow.base, italic = true },
    ["@variable.parameter.builtin"] = { link = "Special" },
}

-- Keymap helpers.
M.cmd = function(cmd)
    return "<cmd>" .. cmd .. "<CR>"
end

M.cmd_alt = function(cmd)
    return ":" .. cmd .. "<CR>"
end

M.lua = function(cmd)
    return "<cmd>lua " .. cmd .. "<CR>"
end

return M
